#!/usr/bin/env bash
# Installs nginx and serves a Hello World page on port 80 without using systemctl

set -e

# Install nginx
apt-get update -y
apt-get install nginx -y

# Replace the default index.html with Hello World!
echo "Hello World!" > /var/www/html/index.html

# Start nginx using service (not systemctl)
service nginx start

# Ensure port 80 is open (optional, only on some clouds with ufw)
if command -v ufw >/dev/null 2>&1; then
  ufw allow 'Nginx HTTP'
fi

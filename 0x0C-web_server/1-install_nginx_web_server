#!/usr/bin/env bash
# This script installs and configures Nginx web server on Ubuntu to listen on port 80
# and return "Hello World!" when querying the root /

# Update package lists
apt-get update -y

# Install Nginx
apt-get install nginx -y

# Create custom index.html with required content
echo "Hello World!" > /var/www/html/index.html

# Configure Nginx to listen on port 80
if ! grep -q "listen 80;" /etc/nginx/sites-enabled/default; then
    sed -i '/listen \[::\]:80 default_server;/a \ \ \ \ listen 80 default_server;' /etc/nginx/sites-enabled/default
fi

# Ensure Nginx starts on boot
update-rc.d nginx defaults

# Restart Nginx without using systemctl
service nginx restart
